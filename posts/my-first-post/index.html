<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>The best way to use shell-scripts | Paul Elvis Otto</title>
<meta name="keywords" content="shell-scripts, data-science, unix">
<meta name="description" content="TLDR
Shell scripts transform data science workflows. When researchers face processing thousands of files with looming deadlines, these humble text files automate entire research pipelines. They excel at preprocessing data, connecting different tools, and creating reproducible analyses. Combined with Makefiles, they&rsquo;ve revolutionized computational social science research. This post explores practical examples that might save your next project.
Using shell scripts for everything
It&rsquo;s a familiar scene in research labs worldwide: the clock reads 2 AM, and a bleary-eyed researcher stares at a computer screen, mentally calculating how long it will take to process hundreds of text files for an upcoming conference deadline. This scenario plays out daily, but it doesn&rsquo;t have to.">
<meta name="author" content="">
<link rel="canonical" href="//localhost:1313/posts/my-first-post/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.85b0a3250a66b0f515f1ded41cc5947ac1895a3f5530555a8f16cab0ec939b1a.css" integrity="sha256-hbCjJQpmsPUV8d7UHMWUesGJWj9VMFVajxbKsOyTmxo=" rel="preload stylesheet" as="style">
<link rel="icon" href="//localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="//localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="//localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="//localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="//localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="//localhost:1313/posts/my-first-post/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="//localhost:1313/" accesskey="h" title="Paul Elvis Otto (Alt + H)">Paul Elvis Otto</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="//localhost:1313/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="//localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="//localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      The best way to use shell-scripts
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h1>
    <div class="post-meta"><span title='2023-01-01 10:00:00 -0500 -0500'>January 1, 2023</span>&nbsp;·&nbsp;11 min

</div>
  </header> 
  <div class="post-content"><h1 id="tldr">TLDR<a hidden class="anchor" aria-hidden="true" href="#tldr">#</a></h1>
<p>Shell scripts transform data science workflows. When researchers face processing thousands of files with looming deadlines, these humble text files automate entire research pipelines. They excel at preprocessing data, connecting different tools, and creating reproducible analyses. Combined with Makefiles, they&rsquo;ve revolutionized computational social science research. This post explores practical examples that might save your next project.</p>
<h1 id="using-shell-scripts-for-everything">Using shell scripts for everything<a hidden class="anchor" aria-hidden="true" href="#using-shell-scripts-for-everything">#</a></h1>
<p>It&rsquo;s a familiar scene in research labs worldwide: the clock reads 2 AM, and a bleary-eyed researcher stares at a computer screen, mentally calculating how long it will take to process hundreds of text files for an upcoming conference deadline. This scenario plays out daily, but it doesn&rsquo;t have to.</p>
<p>&ldquo;Stop clicking and start automating,&rdquo; as the Unix philosophy suggests.</p>
<p>Many researchers who come to data science from non-technical fields rely heavily on Python and R for analytical work while doing file management by hand. This manual approach costs precious research time that could be spent on deeper analysis and interpretation.</p>
<h2 id="data-acquisition-and-preprocessing">Data acquisition and preprocessing<a hidden class="anchor" aria-hidden="true" href="#data-acquisition-and-preprocessing">#</a></h2>
<p>Consider a typical workflow collecting Twitter data for a study on climate change discourse. The traditional approach involves downloading daily batches manually, cleaning them in R, and moving them to an analysis folder—a process that might consume 30 minutes daily.</p>
<p>A shell script transforms this routine:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># data_collection.sh - Download and preprocess Twitter dataset</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create directory structure</span>
</span></span><span style="display:flex;"><span>mkdir -p data/raw data/processed
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Download dataset using curl with appropriate headers</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Downloading Twitter dataset...&#34;</span>
</span></span><span style="display:flex;"><span>curl -L -H <span style="color:#e6db74">&#34;Authorization: Bearer </span>$API_TOKEN<span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>     <span style="color:#e6db74">&#34;https://api.twitter.com/2/tweets/search/recent?query=climatechange&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>     &gt; data/raw/twitter_data.json
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Extract only the tweet text and user information using jq</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Processing JSON data...&#34;</span>
</span></span><span style="display:flex;"><span>cat data/raw/twitter_data.json | jq <span style="color:#e6db74">&#39;.data[] | {text: .text, user_id: .author_id}&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    &gt; data/processed/twitter_processed.json
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Count number of tweets collected</span>
</span></span><span style="display:flex;"><span>TWEET_COUNT<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>jq length data/processed/twitter_processed.json<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Successfully processed </span>$TWEET_COUNT<span style="color:#e6db74"> tweets.&#34;</span>
</span></span></code></pre></div><p>Running this script completes in seconds what took half an hour manually. Schedule it with cron, and suddenly there&rsquo;s an extra two hours of research time each week. Writing this script also forces a deeper understanding of the data structure and processing needs—a perfect example of &ldquo;writing to learn.&rdquo;</p>
<h2 id="setting-up-computational-environments">Setting up computational environments<a hidden class="anchor" aria-hidden="true" href="#setting-up-computational-environments">#</a></h2>
<p>Collaboration brings another challenge: inconsistent results due to different software versions. After a frustrating week of debugging, a solution emerges in script form:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># setup_environment.sh - Create consistent research environment</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check if conda is installed</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> ! command -v conda &amp;&gt; /dev/null; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Conda not found. Please install Miniconda or Anaconda first.&#34;</span>
</span></span><span style="display:flex;"><span>    exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a new conda environment from environment.yml</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Creating research environment from specification...&#34;</span>
</span></span><span style="display:flex;"><span>conda env create -f environment.yml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Activate the environment and install any R packages needed</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Installing R packages...&#34;</span>
</span></span><span style="display:flex;"><span>conda activate css_research
</span></span><span style="display:flex;"><span>Rscript -e <span style="color:#e6db74">&#34;if (!require(&#39;pacman&#39;)) install.packages(&#39;pacman&#39;, repos=&#39;http://cran.us.r-project.org&#39;); pacman::p_load(tidyverse, quanteda, stm, igraph)&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Install pre-commit hooks for consistent code formatting</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Setting up git pre-commit hooks...&#34;</span>
</span></span><span style="display:flex;"><span>pip install pre-commit
</span></span><span style="display:flex;"><span>pre-commit install
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Environment setup complete. Activate with: conda activate css_research&#34;</span>
</span></span></code></pre></div><p>With this script, the &ldquo;it works on my machine&rdquo; problem disappears overnight. New team members can onboard quickly with identical computational environments. Creating this script requires thinking through dependencies and compatibility issues—another instance where the act of writing teaches as much as the resulting product.</p>
<h2 id="batch-processing-large-datasets">Batch processing large datasets<a hidden class="anchor" aria-hidden="true" href="#batch-processing-large-datasets">#</a></h2>
<p>Research on media framing often requires analyzing thousands of news articles. Opening each file, running NLP pipelines, and saving the results would be impossibly tedious. A Sunday afternoon yields this solution:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># process_news_articles.sh - Extract entities from a corpus of news articles</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Directory with input text files</span>
</span></span><span style="display:flex;"><span>INPUT_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;data/raw/news_articles&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Output directory</span>
</span></span><span style="display:flex;"><span>OUTPUT_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;data/processed/entities&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create output directory if it doesn&#39;t exist</span>
</span></span><span style="display:flex;"><span>mkdir -p <span style="color:#e6db74">&#34;</span>$OUTPUT_DIR<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Process each text file</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> file in <span style="color:#e6db74">&#34;</span>$INPUT_DIR<span style="color:#e6db74">&#34;</span>/*.txt; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Get just the filename without directory or extension</span>
</span></span><span style="display:flex;"><span>    filename<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>basename <span style="color:#e6db74">&#34;</span>$file<span style="color:#e6db74">&#34;</span> .txt<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Processing </span>$filename<span style="color:#e6db74">...&#34;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Run NLP entity extraction (using Python script)</span>
</span></span><span style="display:flex;"><span>    python src/extract_entities.py <span style="color:#e6db74">&#34;</span>$file<span style="color:#e6db74">&#34;</span> &gt; <span style="color:#e6db74">&#34;</span>$OUTPUT_DIR<span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>filename<span style="color:#e6db74">}</span><span style="color:#e6db74">_entities.json&#34;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Log completion</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;✓ Processed </span>$filename<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Combine all entities into a single file for analysis</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Combining all entity files...&#34;</span>
</span></span><span style="display:flex;"><span>jq -s <span style="color:#e6db74">&#39;add&#39;</span> <span style="color:#e6db74">&#34;</span>$OUTPUT_DIR<span style="color:#e6db74">&#34;</span>/*_entities.json &gt; <span style="color:#e6db74">&#34;</span>$OUTPUT_DIR<span style="color:#e6db74">/all_entities.json&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Processing complete. Extracted entities saved to </span>$OUTPUT_DIR<span style="color:#e6db74">/all_entities.json&#34;</span>
</span></span></code></pre></div><p>Start the script, take a break, and return to find the entire corpus processed and ready for analysis. What might have taken days of manual work completes in a couple of hours without intervention. To write this script requires understanding file system operations, command substitution, and loop structures—concepts that strengthen one&rsquo;s grasp of computational thinking.</p>
<h2 id="managing-research-paper-workflows">Managing research paper workflows<a hidden class="anchor" aria-hidden="true" href="#managing-research-paper-workflows">#</a></h2>
<p>The true game-changer comes when writing up findings for publication. Researchers often struggle with keeping figures, tables, and text in sync as analyses evolve. After submitting a paper with a figure that didn&rsquo;t match the text (caught by a reviewer), automation becomes essential:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># paper_build.sh - Generate research paper with updated figures</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run analysis scripts to generate results</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Running analyses...&#34;</span>
</span></span><span style="display:flex;"><span>Rscript src/analysis/main_effects.R
</span></span><span style="display:flex;"><span>python src/analysis/network_metrics.py
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check if analysis generated all necessary files</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> ! -f <span style="color:#e6db74">&#34;results/main_effects.csv&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">||</span> <span style="color:#f92672">[</span> ! -f <span style="color:#e6db74">&#34;results/network_figure.png&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Error: Analysis did not produce expected output files.&#34;</span>
</span></span><span style="display:flex;"><span>    exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Update the paper&#39;s figures and tables</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Updating paper figures and tables...&#34;</span>
</span></span><span style="display:flex;"><span>python src/document/update_figures.py
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generate the PDF using pandoc</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Compiling paper PDF...&#34;</span>
</span></span><span style="display:flex;"><span>pandoc paper/main.md <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --filter pandoc-crossref <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --citeproc <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --bibliography<span style="color:#f92672">=</span>paper/references.bib <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --template<span style="color:#f92672">=</span>paper/templates/academic.tex <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    -o paper/output/manuscript.pdf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Paper generation complete. PDF saved to paper/output/manuscript.pdf&#34;</span>
</span></span></code></pre></div><p>This script means making changes to data, running a single command, and having an updated manuscript with all figures and statistics refreshed. Implementing reviewer suggestions and producing a revised manuscript takes minutes rather than days. Writing this script requires mapping the entire document generation pipeline—clarifying each step in the process and identifying potential failure points.</p>
<h2 id="learning-from-mistakes-automating-backups">Learning from mistakes: Automating backups<a hidden class="anchor" aria-hidden="true" href="#learning-from-mistakes-automating-backups">#</a></h2>
<p>Many researchers learn the importance of backups the hard way. After losing weeks of work to hardware failure, this script becomes a lab essential:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># backup_research_data.sh - Create encrypted backup of research data</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Configuration</span>
</span></span><span style="display:flex;"><span>BACKUP_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;backups&#34;</span>
</span></span><span style="display:flex;"><span>DATA_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;data&#34;</span>
</span></span><span style="display:flex;"><span>TIMESTAMP<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>date +<span style="color:#e6db74">&#34;%Y%m%d_%H%M%S&#34;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>BACKUP_FILE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$BACKUP_DIR<span style="color:#e6db74">/research_backup_</span>$TIMESTAMP<span style="color:#e6db74">.tar.gz.enc&#34;</span>
</span></span><span style="display:flex;"><span>GPG_RECIPIENT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;researcher@university.edu&#34;</span>  <span style="color:#75715e"># GPG key to use for encryption</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Ensure backup directory exists</span>
</span></span><span style="display:flex;"><span>mkdir -p <span style="color:#e6db74">&#34;</span>$BACKUP_DIR<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create tar archive of the data directory</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Creating backup archive...&#34;</span>
</span></span><span style="display:flex;"><span>tar -czf - <span style="color:#e6db74">&#34;</span>$DATA_DIR<span style="color:#e6db74">&#34;</span> | gpg --encrypt --recipient <span style="color:#e6db74">&#34;</span>$GPG_RECIPIENT<span style="color:#e6db74">&#34;</span> &gt; <span style="color:#e6db74">&#34;</span>$BACKUP_FILE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Verify backup was created and record its size</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -f <span style="color:#e6db74">&#34;</span>$BACKUP_FILE<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    BACKUP_SIZE<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>du -h <span style="color:#e6db74">&#34;</span>$BACKUP_FILE<span style="color:#e6db74">&#34;</span> | cut -f1<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Backup successful: </span>$BACKUP_FILE<span style="color:#e6db74"> (</span>$BACKUP_SIZE<span style="color:#e6db74">)&#34;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Keep only the 5 most recent backups</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Cleaning up old backups...&#34;</span>
</span></span><span style="display:flex;"><span>    ls -t <span style="color:#e6db74">&#34;</span>$BACKUP_DIR<span style="color:#e6db74">&#34;</span>/*.tar.gz.enc | tail -n +6 | xargs -r rm
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Retained 5 most recent backups.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Backup failed!&#34;</span>
</span></span><span style="display:flex;"><span>    exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span></code></pre></div><p>This script has saved countless research projects, particularly when working with sensitive data that needs encryption and secure storage. Building this backup system forces researchers to think about data security, retention policies, and failure detection—valuable knowledge that extends beyond any single project.</p>
<h1 id="combining-shell-scripts-with-makefiles">Combining shell-scripts with Makefiles<a hidden class="anchor" aria-hidden="true" href="#combining-shell-scripts-with-makefiles">#</a></h1>
<p>As projects grow more complex, a new challenge emerges: dependencies. Some scripts need to run before others, and rerunning everything for a small change wastes computational resources. Enter Makefiles—shell scripts with superpowers.</p>
<h2 id="creating-a-data-science-pipeline-with-make">Creating a data science pipeline with Make<a hidden class="anchor" aria-hidden="true" href="#creating-a-data-science-pipeline-with-make">#</a></h2>
<p>Here&rsquo;s how a robust research pipeline might look:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-makefile" data-lang="makefile"><span style="display:flex;"><span><span style="color:#75715e"># Makefile for computational social science project
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Configuration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>DATA_DIR <span style="color:#f92672">=</span> data
</span></span><span style="display:flex;"><span>SRC_DIR <span style="color:#f92672">=</span> src
</span></span><span style="display:flex;"><span>RESULTS_DIR <span style="color:#f92672">=</span> results
</span></span><span style="display:flex;"><span>PAPER_DIR <span style="color:#f92672">=</span> paper
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Default target
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">all</span><span style="color:#f92672">:</span> paper
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Download and prepare data
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$(DATA_DIR)/raw/survey_data.csv</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	./scripts/download_data.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">$(DATA_DIR)/processed/cleaned_data.csv</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>DATA_DIR<span style="color:#66d9ef">)</span>/raw/survey_data.csv
</span></span><span style="display:flex;"><span>	./scripts/clean_data.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run analysis
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$(RESULTS_DIR)/descriptive_stats.csv</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>DATA_DIR<span style="color:#66d9ef">)</span>/processed/cleaned_data.csv
</span></span><span style="display:flex;"><span>	./scripts/analyze_descriptive.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">$(RESULTS_DIR)/regression_results.csv</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>DATA_DIR<span style="color:#66d9ef">)</span>/processed/cleaned_data.csv
</span></span><span style="display:flex;"><span>	./scripts/run_regressions.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">$(RESULTS_DIR)/network_analysis.json</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>DATA_DIR<span style="color:#66d9ef">)</span>/processed/cleaned_data.csv
</span></span><span style="display:flex;"><span>	./scripts/analyze_network.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generate figures
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$(RESULTS_DIR)/figures/descriptive_plot.png</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>RESULTS_DIR<span style="color:#66d9ef">)</span>/descriptive_stats.csv
</span></span><span style="display:flex;"><span>	./scripts/generate_descriptive_figure.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">$(RESULTS_DIR)/figures/regression_plot.png</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>RESULTS_DIR<span style="color:#66d9ef">)</span>/regression_results.csv
</span></span><span style="display:flex;"><span>	./scripts/generate_regression_figure.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">$(RESULTS_DIR)/figures/network_plot.png</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>RESULTS_DIR<span style="color:#66d9ef">)</span>/network_analysis.json
</span></span><span style="display:flex;"><span>	./scripts/generate_network_figure.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define analysis target that generates all results
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">analysis</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>RESULTS_DIR<span style="color:#66d9ef">)</span>/descriptive_stats.csv <span style="color:#66d9ef">$(</span>RESULTS_DIR<span style="color:#66d9ef">)</span>/regression_results.csv <span style="color:#66d9ef">$(</span>RESULTS_DIR<span style="color:#66d9ef">)</span>/network_analysis.json
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define figures target that generates all figures
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">figures</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>RESULTS_DIR<span style="color:#66d9ef">)</span>/figures/descriptive_plot.png <span style="color:#66d9ef">$(</span>RESULTS_DIR<span style="color:#66d9ef">)</span>/figures/regression_plot.png <span style="color:#66d9ef">$(</span>RESULTS_DIR<span style="color:#66d9ef">)</span>/figures/network_plot.png
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generate paper
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$(PAPER_DIR)/output/manuscript.pdf</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>PAPER_DIR<span style="color:#66d9ef">)</span>/manuscript.md <span style="color:#66d9ef">$(</span>PAPER_DIR<span style="color:#66d9ef">)</span>/references.bib | figures
</span></span><span style="display:flex;"><span>	./scripts/generate_paper.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define paper target
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">paper</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>PAPER_DIR<span style="color:#66d9ef">)</span>/output/manuscript.pdf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Clean up generated files
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">clean</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	rm -rf <span style="color:#66d9ef">$(</span>DATA_DIR<span style="color:#66d9ef">)</span>/processed/*
</span></span><span style="display:flex;"><span>	rm -rf <span style="color:#66d9ef">$(</span>RESULTS_DIR<span style="color:#66d9ef">)</span>/*
</span></span><span style="display:flex;"><span>	rm -rf <span style="color:#66d9ef">$(</span>PAPER_DIR<span style="color:#66d9ef">)</span>/output/*
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">.PHONY</span><span style="color:#f92672">:</span> all analysis figures paper clean
</span></span></code></pre></div><p>The first time a researcher changes a single data preprocessing step and types <code>make paper</code>, watching as only the affected components regenerate instead of rerunning everything, conversion is instant. Projects finish ahead of schedule. Creating this Makefile requires mapping the entire dependency structure of a project—a process that clarifies research logic and identifies potential bottlenecks.</p>
<h2 id="real-world-example-from-api-crisis-to-publication-success">Real-world example: From API crisis to publication success<a hidden class="anchor" aria-hidden="true" href="#real-world-example-from-api-crisis-to-publication-success">#</a></h2>
<p>The value of this approach becomes evident during unexpected challenges. Consider a project analyzing media coverage of climate activism, comparing it with Twitter discussions. Three weeks before a submission deadline, Twitter (now X) announces an API change that breaks the data collection script.</p>
<p>With a well-structured system of shell scripts and Make, adaptation is possible. Here&rsquo;s how the original download script might have looked:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># scripts/download_articles.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>API_KEY<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>cat .api_key<span style="color:#66d9ef">)</span>  <span style="color:#75715e"># Store sensitive info in separate file</span>
</span></span><span style="display:flex;"><span>START_DATE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2022-01-01&#34;</span>
</span></span><span style="display:flex;"><span>END_DATE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2022-12-31&#34;</span>
</span></span><span style="display:flex;"><span>QUERY<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;climate+activism&#34;</span>
</span></span><span style="display:flex;"><span>OUTPUT_FILE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;data/raw/news_articles.json&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mkdir -p data/raw
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Downloading news articles about climate activism...&#34;</span>
</span></span><span style="display:flex;"><span>curl -s <span style="color:#e6db74">&#34;https://newsapi.org/v2/everything?q=</span>$QUERY<span style="color:#e6db74">&amp;from=</span>$START_DATE<span style="color:#e6db74">&amp;to=</span>$END_DATE<span style="color:#e6db74">&amp;apiKey=</span>$API_KEY<span style="color:#e6db74">&#34;</span> &gt; <span style="color:#e6db74">&#34;</span>$OUTPUT_FILE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ARTICLE_COUNT<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>jq <span style="color:#e6db74">&#39;.totalResults&#39;</span> <span style="color:#e6db74">&#34;</span>$OUTPUT_FILE<span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Downloaded metadata for </span>$ARTICLE_COUNT<span style="color:#e6db74"> articles.&#34;</span>
</span></span></code></pre></div><p>For extracting texts:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># scripts/extract_text.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>INPUT_FILE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;data/raw/news_articles.json&#34;</span>
</span></span><span style="display:flex;"><span>OUTPUT_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;data/processed/articles&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mkdir -p <span style="color:#e6db74">&#34;</span>$OUTPUT_DIR<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Extract each article to a separate file</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Extracting articles to individual files...&#34;</span>
</span></span><span style="display:flex;"><span>jq -c <span style="color:#e6db74">&#39;.articles[]&#39;</span> <span style="color:#e6db74">&#34;</span>$INPUT_FILE<span style="color:#e6db74">&#34;</span> | <span style="color:#66d9ef">while</span> read -r article; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Extract title and create a sanitized filename</span>
</span></span><span style="display:flex;"><span>    title<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">&#34;</span>$article<span style="color:#e6db74">&#34;</span> | jq -r <span style="color:#e6db74">&#39;.title&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>    filename<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">&#34;</span>$title<span style="color:#e6db74">&#34;</span> | tr -cs <span style="color:#e6db74">&#39;A-Za-z0-9&#39;</span> <span style="color:#e6db74">&#39;_&#39;</span> | cut -c1-100<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Extract content and save to file</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;</span>$article<span style="color:#e6db74">&#34;</span> | jq -r <span style="color:#e6db74">&#39;.content&#39;</span> &gt; <span style="color:#e6db74">&#34;</span>$OUTPUT_DIR<span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>filename<span style="color:#e6db74">}</span><span style="color:#e6db74">.txt&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>FILE_COUNT<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>ls <span style="color:#e6db74">&#34;</span>$OUTPUT_DIR<span style="color:#e6db74">&#34;</span> | wc -l<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Extracted text from </span>$FILE_COUNT<span style="color:#e6db74"> articles.&#34;</span>
</span></span></code></pre></div><p>And for sentiment analysis:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># scripts/analyze_sentiment.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>INPUT_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;data/processed/articles&#34;</span>
</span></span><span style="display:flex;"><span>OUTPUT_FILE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;results/sentiment_scores.csv&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mkdir -p results
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create CSV header</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;filename,sentiment_score,positive_words,negative_words&#34;</span> &gt; <span style="color:#e6db74">&#34;</span>$OUTPUT_FILE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Process each article</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> file in <span style="color:#e6db74">&#34;</span>$INPUT_DIR<span style="color:#e6db74">&#34;</span>/*.txt; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    filename<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>basename <span style="color:#e6db74">&#34;</span>$file<span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Analyzing sentiment in </span>$filename<span style="color:#e6db74">...&#34;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Run Python sentiment analysis script</span>
</span></span><span style="display:flex;"><span>    python src/sentiment_analysis.py <span style="color:#e6db74">&#34;</span>$file<span style="color:#e6db74">&#34;</span> &gt;&gt; <span style="color:#e6db74">&#34;</span>$OUTPUT_FILE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Sentiment analysis complete. Results saved to </span>$OUTPUT_FILE<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><p>All orchestrated with a Makefile:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-makefile" data-lang="makefile"><span style="display:flex;"><span><span style="color:#75715e"># Makefile for news media analysis
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">all</span><span style="color:#f92672">:</span> results/sentiment_report.pdf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Data collection phase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">data/raw/news_articles.json</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	./scripts/download_articles.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Data processing phase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">data/processed/articles</span><span style="color:#f92672">:</span> data/raw/news_articles.json
</span></span><span style="display:flex;"><span>	./scripts/extract_text.sh
</span></span><span style="display:flex;"><span>	touch data/processed/articles  <span style="color:#75715e"># Update directory timestamp</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Analysis phase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">results/sentiment_scores.csv</span><span style="color:#f92672">:</span> data/processed/articles
</span></span><span style="display:flex;"><span>	./scripts/analyze_sentiment.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">results/topic_model.json</span><span style="color:#f92672">:</span> data/processed/articles
</span></span><span style="display:flex;"><span>	./scripts/model_topics.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Visualization phase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">results/figures/sentiment_plot.png</span><span style="color:#f92672">:</span> results/sentiment_scores.csv
</span></span><span style="display:flex;"><span>	./scripts/plot_sentiment.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">results/figures/topic_network.png</span><span style="color:#f92672">:</span> results/topic_model.json
</span></span><span style="display:flex;"><span>	./scripts/visualize_topics.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Reporting phase
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">results/sentiment_report.pdf</span><span style="color:#f92672">:</span> results/figures/sentiment_plot.png results/figures/topic_network.png
</span></span><span style="display:flex;"><span>	./scripts/generate_report.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clean</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	rm -rf data/processed/*
</span></span><span style="display:flex;"><span>	rm -rf results/*
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">.PHONY</span><span style="color:#f92672">:</span> all clean
</span></span></code></pre></div><p>By modifying the download script to use archived data and running <code>make</code>, a complete, updated analysis emerges within hours. This structure allows quick adaptation to unexpected challenges. The project stays on track, with time for proper review before submission.</p>
<h2 id="how-this-approach-transforms-research">How this approach transforms research<a hidden class="anchor" aria-hidden="true" href="#how-this-approach-transforms-research">#</a></h2>
<p>Researchers who adopt shell scripts and Makefiles experience a significant transformation in their work. Those who begin as primarily qualitative researchers using computational methods occasionally often develop into computational social scientists who handle large-scale data analysis with confidence.</p>
<p>The benefits include:</p>
<ol>
<li><strong>Time efficiency</strong>: What used to take days now takes hours or minutes.</li>
<li><strong>Error reduction</strong>: Manual steps inevitably lead to mistakes; automation eliminates them.</li>
<li><strong>Better documentation</strong>: Scripts serve as executable documentation of research processes.</li>
<li><strong>Improved collaboration</strong>: New team members can reproduce environments and analyses easily.</li>
<li><strong>Reduced stress</strong>: When deadlines approach, changes can produce updated results quickly.</li>
</ol>
<p>Senior researchers who have manually processed data for decades often express amazement when witnessing how quickly automated workflows can produce and update analyses. &ldquo;I had no idea what I was missing,&rdquo; is a common reaction.</p>
<h2 id="tips-from-the-trenches">Tips from the trenches<a hidden class="anchor" aria-hidden="true" href="#tips-from-the-trenches">#</a></h2>
<p>Through trial and error, effective practices for shell scripting in data science have emerged:</p>
<ol>
<li><strong>Start small</strong>: Begin with a script that just renames files in a folder and build from there.</li>
<li><strong>Comment generously</strong>: Include what each script does at the top and explain complex commands.</li>
<li><strong>Use variables for paths</strong>: This makes scripts more portable and easier to modify.</li>
<li><strong>Add error checking</strong>: Early scripts might fail silently; mature ones report problems clearly.</li>
<li><strong>Create modular scripts</strong>: Each script should do one thing well, following Unix philosophy.</li>
<li><strong>Use shellcheck</strong>: This tool catches countless bugs before they cause problems.</li>
<li><strong>Build a script library</strong>: Maintain a collection of useful scripts to adapt for new projects.</li>
</ol>
<p>Writing these scripts reinforces understanding of the underlying processes. Each script becomes a learning opportunity, forcing clarity about data structures, processing steps, and potential failure points.</p>
<h2 id="common-patterns-for-research-projects">Common patterns for research projects<a hidden class="anchor" aria-hidden="true" href="#common-patterns-for-research-projects">#</a></h2>
<p>Experienced computational social scientists develop standard patterns that apply across research projects:</p>
<ul>
<li><strong>Data transformation chains</strong>: <code>download.sh → clean.sh → transform.sh → analyze.sh</code></li>
<li><strong>Parameter explorations</strong>: Run the same analysis with different parameters to test sensitivity</li>
<li><strong>Longitudinal data collection</strong>: Use cron to gather data at regular intervals for time-series studies</li>
<li><strong>Template generators</strong>: Create consistent file structures for new analyses</li>
<li><strong>Notification systems</strong>: Get alerts when long-running analyses complete or encounter errors</li>
</ul>
<p>Each of these patterns represents accumulated knowledge, refined through practice and shared across research teams. Writing and refining these scripts becomes a form of knowledge crystallization.</p>
<h1 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h1>
<p>The journey from manually processing files to building automated research pipelines transforms not just workflows but researchers themselves. Shell scripts and Makefiles save countless hours while improving the quality and reproducibility of research.</p>
<p>For those just starting in computational social science, learning shell scripting might seem like yet another technical skill to master in an already overwhelming field. But the investment pays dividends quickly. Start with simple scripts that solve immediate problems, and build from there.</p>
<p>The act of writing these scripts teaches as much as using them. Each script requires clarifying thinking about data structures, processing steps, and error conditions. This &ldquo;writing to learn&rdquo; approach deepens understanding of both the research domain and the computational tools.</p>
<p>While a computer quietly runs a script collecting data for tomorrow&rsquo;s analysis, researchers can focus on interpretation and insight rather than mechanical processing. Running <code>make analysis</code> each morning provides fresh results without tedious manual intervention. That efficiency still feels revolutionary to many researchers—efficiency that transforms research productivity and opens new analytical possibilities.</p>
<p>For those drowning in manual data processing or struggling to keep analyses reproducible, shell scripts offer a path forward. Your future research will be better for it.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="//localhost:1313/tags/shell-scripts/">Shell-Scripts</a></li>
      <li><a href="//localhost:1313/tags/data-science/">Data-Science</a></li>
      <li><a href="//localhost:1313/tags/unix/">Unix</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="//localhost:1313/posts/harnessing-makefiles-for-data-pipelines/">
    <span class="title">« Prev</span>
    <br>
    <span>Taming Election Data Chaos with Makefiles</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share The best way to use shell-scripts on x"
            href="https://x.com/intent/tweet/?text=The%20best%20way%20to%20use%20shell-scripts&amp;url=%2f%2flocalhost%3a1313%2fposts%2fmy-first-post%2f&amp;hashtags=shell-scripts%2cdata-science%2cunix">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share The best way to use shell-scripts on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f%2flocalhost%3a1313%2fposts%2fmy-first-post%2f&amp;title=The%20best%20way%20to%20use%20shell-scripts&amp;summary=The%20best%20way%20to%20use%20shell-scripts&amp;source=%2f%2flocalhost%3a1313%2fposts%2fmy-first-post%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share The best way to use shell-scripts on reddit"
            href="https://reddit.com/submit?url=%2f%2flocalhost%3a1313%2fposts%2fmy-first-post%2f&title=The%20best%20way%20to%20use%20shell-scripts">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share The best way to use shell-scripts on facebook"
            href="https://facebook.com/sharer/sharer.php?u=%2f%2flocalhost%3a1313%2fposts%2fmy-first-post%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share The best way to use shell-scripts on whatsapp"
            href="https://api.whatsapp.com/send?text=The%20best%20way%20to%20use%20shell-scripts%20-%20%2f%2flocalhost%3a1313%2fposts%2fmy-first-post%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share The best way to use shell-scripts on telegram"
            href="https://telegram.me/share/url?text=The%20best%20way%20to%20use%20shell-scripts&amp;url=%2f%2flocalhost%3a1313%2fposts%2fmy-first-post%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share The best way to use shell-scripts on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=The%20best%20way%20to%20use%20shell-scripts&u=%2f%2flocalhost%3a1313%2fposts%2fmy-first-post%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="//localhost:1313/">Paul Elvis Otto</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
